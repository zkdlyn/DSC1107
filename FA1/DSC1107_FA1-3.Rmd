---
title: "FA1: Data Wrangling"
author: "Baybayon, Darlyn Antoinette"
output: github_document
editor_options: 
  chunk_output_type: inline
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


### Introduction
```{r}
library(tidyverse)

```

### Data import

```{r}
heights <- read_csv("heights.csv", show_col_types = FALSE)
heights
```
### Tidy data

```{r}
table1
table2
table3
table4a
table4b

```

### 4 Pivoting
#### 4.1 Longer
```{r}
table4a %>%
  pivot_longer(cols=c(`1999`, `2000`), names_to = "year", values_to = "cases")
```

Exercise: Use pivot_longer() to tidy table4b in a similar fashion. What is the difference between the code used to tidy table4a and table4b?
```{r}
table4b %>%
  pivot_longer(cols=c(`1999`, `2000`), names_to = "year", values_to = "population")

```
The code is very similar to table4a except the new variables in this table are year and population.

#### 4.2 Wider

```{r}
table2%>%
 pivot_wider(names_from=type,values_from=count)
```

Exercises:
1.  The code fails because 1999 and 2000 are non-syntactic names so they should be surrounded in backticks. The correct code should be:
```{r}
 table4a%>%
 pivot_longer(cols=c(`1999`,`2000`), names_to="year",values_to="cases")
```

2. The table could be made longer with new variables, gender and count.

```{r}
tribble(
  ~pregnant, ~male, ~female,
  "yes", NA, 10,
  "no", 20, 12)

# wider
tribble(
  ~pregnant, ~male, ~female,
  "yes", NA, 10,
  "no", 20, 12)%>% pivot_longer(cols = c(male, female), names_to = "gender", values_to = "count")


```


### 5 Joining

```{r}
tidy4a <- table4a %>%
 pivot_longer(c(`1999`, `2000`), names_to = "year", values_to = "cases")

tidy4b <- table4b %>%
 pivot_longer(c(`1999`, `2000`), names_to = "year", values_to = "population")
 
 left_join(x = tidy4a, y = tidy4b, by = c("country", "year"))

```

 Exercise: Consider the two tibbles below. What is the key column? Without writing any code, can you
 predict how many rows and columns left_join(x,y) and left_join(y,x) will have?


```{r}
 x <- tribble(
 ~state, ~population,
 "PA", 12.8,
 "TX", 28.6,
 "NY", 19.5
 )
 y <- tribble(
 ~state, ~capital,
 "TX", "Austin",
 "CA", "Sacramento",
 "NY", "New York City",
 "MI", "Lansing"
 )
```

The key column is state. left_join(x,y) should have three columns (state, population, and capital) and three rows for three state entries in x. The left_join(y,x), should have the same three columns but four rows for four state entries in y.

### 6 Separating

```{r}
table3 %>%
 separate(rate, into = c("cases", "population"))

table3 %>%
 separate(rate, into = c("cases", "population"), sep = "/")

table3%>%
 separate(rate,into=c("cases", "population"),convert=TRUE)

table3%>%
 separate(year,into=c("century", "year"),sep=2)
```


### 7 Missing Values
```{r}
stocks<-tibble(
 year =c(2015,2015,2015,2015, 2016,2016,2016),
 qtr =c( 1, 2, 3, 4, 2, 3, 4),
 return=c(1.88,0.59,0.35, NA,0.92,0.17,2.66)
 )
 stocks
```



```{r}
 stocks %>%
 pivot_wider(names_from = year, values_from = return)
  
stocks %>%
 na.omit()
```
